import{_ as B}from"./CN1kmcm0.js";import{_ as S}from"./Bsrf37Yq.js";import{_ as L,N as T,r as b,c as n,b as d,a as e,w as g,I as w,E as x,J as y,B as p,n as k,t as _,F as N,e as V,d as h,H as z,M as A,o as l,L as D}from"./BeuPNDKa.js";import{_ as E}from"./DF3qM6BK.js";import{_ as P}from"./DBEUCIjR.js";import{u as U}from"./C3kHl5Uz.js";import"./DJCvy_yv.js";const $={class:"w-full rounded-3xl flex flex-col gap-7 overflow-hidden"},O={class:"relative"},R={key:0,class:"text-red-500 text-sm mt-1"},q={class:"relative flex-1"},G={key:0,class:"text-red-500 text-sm mt-1"},H={key:1,class:"mt-2 flex flex-wrap gap-2"},I={class:"text-white text-sm"},J={class:"flex flex-col sm:flex-row gap-4 justify-end"},W={class:"relative w-44 h-12"},K={class:"absolute inset-0 flex items-center justify-center bg-transparent rounded-3xl border border-primary shadow-[0_0_6px_rgba(202,23,92,1)] text-white text-base font-medium font-['Shabnam'] cursor-pointer hover:bg-primary/10 transition-colors"},Q={__name:"new",setup(X){const{addToast:m}=D(),o=T({subject:"",message:""}),i=b([]),t=b({}),j=A(),M=a=>{const s=Array.from(a.target.files),c=["image/jpeg","image/png","application/pdf"],f=5*1024*1024;s.forEach(r=>{if(!c.includes(r.type)){t.value.files="Only JPEG, PNG, and PDF files are allowed.";return}if(r.size>f){t.value.files="File size must be less than 5MB.";return}const u=new FileReader;u.onload=v=>{i.value.push({name:r.name,url:v.target.result}),t.value.files=""},u.readAsDataURL(r)})},C=a=>{i.value.splice(a,1)},F=async()=>{var a;if(t.value={},o.subject.trim()||(t.subject="Subject is required."),o.message.trim()||(t.value.message="Message is required."),!(Object.keys(t.value).length>0))try{const{data:s,status:c}=await U("/tickets",{method:"POST",body:{files:i,...o}});c.value=="success"?(m("Ticket created successfully!","success",5e3),j.push("/dashboard/support")):m((a=s.value.error)==null?void 0:a.message,"error",3e3)}catch(s){console.error("Error creating ticket:",s),m("Failed to create ticket.","error",3e3)}};return(a,s)=>{const c=B,f=S;return l(),n("div",$,[d(c,{to:"/dashboard/support",class:"relative w-52 h-12 flex items-center justify-center bg-transparent rounded-3xl border border-primary shadow-[0_0_6px_rgba(202,23,92,1)] text-white text-base font-medium font-['Shabnam'] hover:bg-primary/10 transition-colors"},{default:g(()=>s[2]||(s[2]=[e("span",{class:"flex items-center gap-2"},[e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M9 15L3 9L9 3","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M3 9H21","stroke-linecap":"round","stroke-linejoin":"round"})]),h(" Back to Messages ")],-1)])),_:1}),e("form",{onSubmit:z(F,["prevent"]),class:"flex flex-col gap-7 w-full"},[e("div",O,[w(e("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>p(o).subject=r),type:"text",placeholder:"Conversation Subject",class:k(["w-full h-12 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":t.value.subject}])},null,2),[[y,p(o).subject]]),t.value.subject?(l(),n("p",R,_(t.value.subject),1)):x("",!0)]),e("div",q,[w(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=r=>p(o).message=r),placeholder:"Write your message ...",class:k(["w-full h-64 sm:h-96 p-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary resize-none",{"border-red-500":t.value.message}])},null,2),[[y,p(o).message]]),t.value.message?(l(),n("p",G,_(t.value.message),1)):x("",!0),i.value.length?(l(),n("div",H,[(l(!0),n(N,null,V(i.value,(r,u)=>(l(),n("div",{key:u,class:"flex items-center gap-2 bg-gray-800 p-2 rounded-lg"},[e("span",I,_(r.name),1),d(E,{onClick:v=>C(u)},{default:g(()=>s[3]||(s[3]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M6 18L18 6M6 6l12 12"})],-1)])),_:2},1032,["onClick"])]))),128))])):x("",!0)]),e("div",J,[e("label",W,[e("input",{type:"file",multiple:"",class:"hidden",onChange:M},null,32),e("span",K,[d(f,{name:"iconsax/linear/paperclip-2"}),s[4]||(s[4]=h(" Attachment "))])]),d(P,{type:"submit",class:"justify-center"},{default:g(()=>s[5]||(s[5]=[e("span",{class:"flex items-center gap-2"},[h(" Send Message "),e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M5 13L9 17L19 7","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)])),_:1})])],32)])}}},ae=L(Q,[["__scopeId","data-v-6555ea59"]]);export{ae as default};
