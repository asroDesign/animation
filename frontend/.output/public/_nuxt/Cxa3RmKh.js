import{r as g,l as q,Q as $,c as a,a as t,t as d,d as y,n as b,F as _,e as v,o as n,E as p,b as S,I as f,J as h,R as V,w as F,H as U}from"./BeuPNDKa.js";import{_ as C}from"./DF3qM6BK.js";import{u as m}from"./C3kHl5Uz.js";import"./DJCvy_yv.js";const M={class:"max-w-4xl mx-auto p-6"},N={class:"text-3xl font-bold mb-4"},P={class:"shadow-md rounded-lg p-6 mb-6"},T={class:"text-lg mb-2"},A={class:"text-lg"},R={class:"flex justify-between items-center mb-3"},B={class:"text-lg"},D={key:0},O={class:"text-xl font-medium text-gray-700 mb-3"},j=["onSubmit"],E=["for"],I=["onUpdate:modelValue","id","required"],z=["onUpdate:modelValue","id","required"],H=["onUpdate:modelValue","id","required"],J=["value"],L={key:1},Q={class:"text-lg mb-2"},G={class:"text-lg mb-2"},K=["onClick"],W={key:2},X={class:"text-lg"},Y=["href"],ae={__name:"[id]",setup(Z){const x=$(),r=g({}),i=g({});q(async()=>{const{data:u}=await m(`/processes/${x.params.id}`,{});r.value=u.value});async function w(u){const s=Object.entries(i.value).map(([e,c])=>({form_field_id:e,value:c}));await m(`/stages/${u.id}/responses`,{body:{responses:s},method:"POST"}),i.value={};const{data:o}=await m(`/processes/${x.params.id}`,{});r.value=o.value}async function k(u){await m(`/invoices/${u.id}/payments`,{body:{amount:u.amount},method:"POST"});const{data:s}=await m(`/processes/${x.params.id}`,{});r.value=s.value}return(u,s)=>(n(),a("div",M,[t("h1",N,"Process #"+d(r.value.id),1),t("div",P,[t("p",T,[s[0]||(s[0]=t("span",{class:"font-semibold"},"Description:",-1)),y(" "+d(r.value.description),1)]),t("p",A,[s[1]||(s[1]=t("span",{class:"font-semibold"},"Status:",-1)),t("span",{class:b({"text-green-600":r.value.status==="completed","text-yellow-600":r.value.status==="pending","text-red-600":r.value.status==="failed"})},d(r.value.status),3)])]),s[8]||(s[8]=t("h2",{class:"text-2xl font-semibold mt-8 mb-4"},"Stages",-1)),(n(!0),a(_,null,v(r.value.stages,o=>(n(),a("div",{key:o.id,class:"border border-gray-300 shadow-md rounded-lg p-6 mb-4 transition-transform hover:-translate-y-1"},[t("div",R,[t("p",B,[s[2]||(s[2]=t("span",{class:"font-semibold"},"Type:",-1)),y(" "+d(o.stage_type),1)]),t("span",{class:b(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",o.requires_payment?"bg-red-100 text-red-800":"bg-gray-100 text-gray-400"])},d(o.requires_payment?"Payment Required":""),3)]),o.stage_type==="form"&&o.typed&&!r.value.stages.some(e=>e.requires_payment==1)?(n(),a("div",D,[t("h3",O,"Form: "+d(o.type.name),1),t("form",{onSubmit:U(e=>w(o),["prevent"]),class:"space-y-4"},[(n(!0),a(_,null,v(o.typed.fields,e=>{var c;return n(),a("div",{key:e.id,class:"space-y-1"},[t("label",{for:`field_${e.id}`,class:"block text-sm font-medium"},d(e.label)+" "+d(e.required?"*":""),9,E),e.type==="text"?f((n(),a("input",{key:0,"onUpdate:modelValue":l=>i.value[e.id]=l,id:`field_${e.id}`,required:e.required,type:"text",class:"w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"},null,8,I)),[[h,i.value[e.id]]]):p("",!0),e.type==="textarea"?f((n(),a("textarea",{key:1,"onUpdate:modelValue":l=>i.value[e.id]=l,id:`field_${e.id}`,required:e.required,class:"w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",rows:"4"},null,8,z)),[[h,i.value[e.id]]]):p("",!0),e.type==="select"?f((n(),a("select",{key:2,"onUpdate:modelValue":l=>i.value[e.id]=l,id:`field_${e.id}`,required:e.required,class:"w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"},[s[3]||(s[3]=t("option",{value:"",disabled:""},"Select an option",-1)),(n(!0),a(_,null,v((c=e.options)==null?void 0:c.split(","),l=>(n(),a("option",{key:l,value:l},d(l),9,J))),128))],8,H)),[[V,i.value[e.id]]]):p("",!0)])}),128)),S(C,{type:"submit"},{default:F(()=>s[4]||(s[4]=[y(" Submit ")])),_:1})],40,j)])):p("",!0),o.stage_type==="invoice"&&o.typed?(n(),a("div",L,[t("p",Q,[s[5]||(s[5]=t("span",{class:"font-semibold"},"Amount:",-1)),y(" "+d(o.typed.amount),1)]),t("p",G,[s[6]||(s[6]=t("span",{class:"font-semibold mr-2"},"Status:",-1)),t("span",{class:b(["inline-flex items-center px-2 py-1 rounded-full text-sm font-medium",o.typed.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},d(o.typed.status),3)]),o.typed.status==="pending"?(n(),a("button",{key:0,onClick:e=>k(o.typed),class:"bg-green-600 text-white hover:bg-green-700 px-4 py-2 rounded-md font-medium transition-colors"}," Pay Now ",8,K)):p("",!0)])):p("",!0),o.stage_type==="file"&&o.typed&&!r.value.stages.some(e=>e.requires_payment==1)?(n(),a("div",W,[t("p",X,[s[7]||(s[7]=t("span",{class:"font-semibold"},"File:",-1)),t("a",{href:`/storage/${o.typed.path}`,download:"",class:"text-blue-600 hover:underline"},d(o.typed.name),9,Y)])])):p("",!0)]))),128))]))}};export{ae as default};
