import{_ as k}from"./CN1kmcm0.js";import{G as S,r as u,c as p,a as t,H as N,E as R,b as c,I as f,J as g,B as o,t as x,w as v,d,o as b,q as w,z as _}from"./BeuPNDKa.js";import{_ as O}from"./DF3qM6BK.js";import{u as V}from"./C3kHl5Uz.js";import{u as y}from"./DJCvy_yv.js";const q={class:"min-h-screen flex items-center justify-center"},C={class:"bg-white/5 p-8 rounded-lg shadow-lg w-full max-w-md"},D={class:"mb-4"},E={class:"mb-6"},M={key:0,class:"mb-4 text-red-600 text-sm"},T={class:"mt-4 text-center text-sm"},P={__name:"login",setup(A){const m=S(),a=u({email:"",password:""}),r=u(""),l=u(!1),h=async()=>{var n,e;l.value=!0,r.value="";try{const{data:s}=await V("/login",{body:{email:a.value.email,password:a.value.password},method:"POST"});console.log("Manual login response:",s.value),y("userData").value=JSON.stringify(s.value.user),w("userData").value=s.value.user,y("CSRF_ASRO_TOKEN").value=s.value.token,w("CSRF_ASRO_TOKEN").value=s.value.token,_().query.to?m.push(_().query.to):m.push("/dashboard")}catch(s){console.error("Manual login error:",s),r.value=((e=(n=s.response)==null?void 0:n.data)==null?void 0:e.message)||"Login failed."}finally{l.value=!1}};return(n,e)=>{const s=k;return b(),p("div",q,[t("div",C,[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold mb-6 text-center"},"Login",-1)),t("form",{onSubmit:N(h,["prevent"])},[t("div",D,[e[2]||(e[2]=t("label",{for:"email",class:"block text-sm font-medium"},"Email",-1)),f(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=i=>o(a).email=i),type:"email",class:"w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",required:""},null,512),[[g,o(a).email]])]),t("div",E,[e[3]||(e[3]=t("label",{for:"password",class:"block text-sm font-medium"},"Password",-1)),f(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=i=>o(a).password=i),type:"password",class:"w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",required:""},null,512),[[g,o(a).password]])]),o(r)?(b(),p("div",M,x(o(r)),1)):R("",!0),c(O,{type:"submit",class:"w-full transition duration-200",disabled:o(l)},{default:v(()=>[d(x(o(l)?"Logging in...":"Login"),1)]),_:1},8,["disabled"])],32),t("p",T,[e[5]||(e[5]=d(" Don't have an account? ")),c(s,{to:"/auth/register",class:"text-blue-500 hover:underline"},{default:v(()=>e[4]||(e[4]=[d("Register")])),_:1})])])])}}};export{P as default};
