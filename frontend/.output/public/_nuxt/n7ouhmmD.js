import{_ as q}from"./CN1kmcm0.js";import{_ as R,N as U,v as H,r as J,c as d,a as e,B as r,I as c,E as m,J as p,n as f,t as w,b as D,w as L,d as _,L as W,M as G,o as u}from"./BeuPNDKa.js";import{u as b}from"./C3kHl5Uz.js";import{_ as K}from"./DBEUCIjR.js";import"./DJCvy_yv.js";const Q={class:"max-w-4xl mx-auto rounded-3xl flex flex-col gap-7"},X={class:"flex flex-col items-center gap-7 w-full"},Y={class:"flex flex-col items-center gap-3.5"},Z=["src"],ee={class:"relative w-56 h-12"},se={class:"w-full"},te={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},oe={class:"relative"},re={key:0,class:"text-red-500 text-sm mt-1"},ae={class:"relative"},le={key:0,class:"text-red-500 text-sm mt-1"},ne={class:"relative"},ie={key:0,class:"text-red-500 text-sm mt-1"},de={class:"relative"},ue={key:0,class:"text-red-500 text-sm mt-1"},ce={class:"my-3"},me={class:"w-full"},pe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},fe={class:"relative"},we={key:0,class:"text-red-500 text-sm mt-1"},ve={class:"relative"},he={key:0,class:"text-red-500 text-sm mt-1"},xe={class:"relative"},ge={key:0,class:"text-red-500 text-sm mt-1"},be={class:"sm:flex grid lg:justify-start gap-4 w-full justify-center sm:justify-end"},ye={class:"row-start-2"},_e={__name:"profile",async setup(Pe){let h,P;const{addToast:k}=W(),o=U({avatar:"",full_name:"",email:"",mobile:"",secondaryEmail:""}),a=U({old_password:"",newPassword:"",confirmPassword:""}),{data:S}=([h,P]=H(()=>b("user",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})),h=await h,P(),h);S&&Object.assign(o,S.value);const t=J({});G();const M=async i=>{const s=i.target.files[0];if(s){if(!s.type.startsWith("image/")){t.value.photo="Please upload an image file.";return}const n=new FileReader;n.onload=async y=>{const v=new FormData;v.append("image",s);const{status:x,error:g}=await b("update_user_image",{body:v,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},method:"POST"});x.value!="success"?t.value.photo=g.value:t.value.photo=""},n.readAsDataURL(s)}},T=()=>(t.value={},o.full_name.trim()||(t.value.fullName="Full Name is required."),o.email.trim()?/\S+@\S+\.\S+/.test(o.email)||(t.value.email="Invalid email format."):t.value.email="Email is required.",o.mobile&&!/^\+?\d{10,15}$/.test(o.mobile)&&(t.value.mobile="Invalid phone number."),o.secondaryEmail&&!/\S+@\S+\.\S+/.test(o.secondaryEmail)&&(t.value.secondaryEmail="Invalid secondary email format."),Object.keys(t.value).length===0),O=async()=>{var i;if(T())try{console.log("Form Data:",o);const{status:s,error:n}=await b("update_profile",{body:o,method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s.value=="success"?k("Changes saved successfully!","success",5e3):t.value=(i=n.value.data)==null?void 0:i.errors}catch(s){t.value.general="Failed to save changes. Please try again.",console.error(s)}},$=()=>(t.value={},a.old_password&&!a.old_password&&(t.value.old_password="New Password is required."),a.newPassword&&a.newPassword.length<8&&(t.value.newPassword="New Password must be at least 8 characters."),a.newPassword!==a.confirmPassword&&(t.value.confirmPassword="Passwords do not match."),Object.keys(t.value).length===0),z=async()=>{var i;if($())try{console.log("Form Data:",a);const{status:s,error:n}=await b("change_password",{body:a,method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s.value=="success"?k("Changes saved successfully!","success",5e3):t.value=((i=n.value.data)==null?void 0:i.errors)||{newPassword:n.value.data.msg}}catch(s){t.value.general="Failed to save changes. Please try again.",console.error(s)}};return(i,s)=>{var y,v,x,g,C,j,E,A,B,F,I,N,V;const n=q;return u(),d("div",Q,[e("div",X,[e("div",Y,[e("img",{src:r(o).avatar||"https://placehold.co/200x200",alt:"Profile Photo",class:"w-48 h-48 rounded-full object-cover"},null,8,Z),e("label",ee,[e("input",{type:"file",accept:"image/*",class:"hidden",onChange:M},null,32),s[7]||(s[7]=e("span",{class:"absolute inset-0 flex items-center justify-center bg-transparent rounded-3xl border border-primary shadow-[0_0_6px_rgba(202,23,92,1)] text-white text-base font-medium font-['Shabnam'] cursor-pointer hover:bg-primary/10 transition-colors"}," Upload Photo ",-1))])]),e("div",se,[s[9]||(s[9]=e("h2",{class:"text-white sm:text-2xl text-xl font-normal font-['Impact'] mb-4 text-center sm:text-left"}," Personal Information ",-1)),e("div",te,[e("div",oe,[c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>r(o).full_name=l),type:"text",placeholder:"Full Name",class:f(["w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":(y=t.value)==null?void 0:y.full_name}])},null,2),[[p,r(o).full_name]]),t.value.full_name?(u(),d("p",re,w(t.value.full_name),1)):m("",!0)]),e("div",ae,[c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>r(o).email=l),type:"email",placeholder:"Email",class:f(["w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":(v=t.value)==null?void 0:v.email}])},null,2),[[p,r(o).email]]),(x=t.value)!=null&&x.email?(u(),d("p",le,w(t.value.email),1)):m("",!0)]),e("div",ne,[c(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>r(o).mobile=l),type:"tel",placeholder:"Phone Number",class:f(["w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":(g=t.value)==null?void 0:g.mobile}])},null,2),[[p,r(o).mobile]]),(C=t.value)!=null&&C.mobile?(u(),d("p",ie,w(t.value.mobile),1)):m("",!0)]),e("div",de,[c(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>r(o).secondaryEmail=l),type:"email",placeholder:"Secondary Email",class:f(["w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":(j=t.value)==null?void 0:j.secondaryEmail}])},null,2),[[p,r(o).secondaryEmail]]),(E=t.value)!=null&&E.secondaryEmail?(u(),d("p",ue,w(t.value.secondaryEmail),1)):m("",!0)])]),e("div",ce,[D(K,{onClick:O,type:"submit",class:"relative w-56 h-12 flex items-center justify-center bg-primary rounded-3xl shadow-[0_0_6px_rgba(202,23,92,1)] border border-primary text-white text-base font-medium font-['Shabnam'] hover:bg-primary/90 transition-colors"},{default:L(()=>s[8]||(s[8]=[e("span",{class:"flex items-center gap-2"},[_(" Save Changes "),e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M5 13L9 17L19 7","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)])),_:1})])]),e("div",me,[s[11]||(s[11]=e("h2",{class:"text-white text-2xl font-normal font-['Impact'] mb-4 text-center sm:text-left"}," Password ",-1)),e("div",pe,[e("div",fe,[c(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>r(a).old_password=l),type:"password",placeholder:"Current Password",class:f(["w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":(A=t.value)==null?void 0:A.old_password}])},null,2),[[p,r(a).old_password]]),(B=t.value)!=null&&B.old_password?(u(),d("p",we,w(t.value.old_password),1)):m("",!0)]),s[10]||(s[10]=e("div",{class:"hidden sm:block"},null,-1)),e("div",ve,[c(e("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>r(a).newPassword=l),type:"password",placeholder:"New Password",class:f(["w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":(F=t.value)==null?void 0:F.newPassword}])},null,2),[[p,r(a).newPassword]]),(I=t.value)!=null&&I.newPassword?(u(),d("p",he,w(t.value.newPassword),1)):m("",!0)]),e("div",xe,[c(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>r(a).confirmPassword=l),type:"password",placeholder:"Confirm Password",class:f(["w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":(N=t.value)==null?void 0:N.confirmPassword}])},null,2),[[p,r(a).confirmPassword]]),(V=t.value)!=null&&V.confirmPassword?(u(),d("p",ge,w(t.value.confirmPassword),1)):m("",!0)])])]),e("div",be,[e("div",ye,[D(n,{to:"/dashboard",class:"relative w-52 h-12 flex items-center justify-center bg-transparent rounded-3xl border border-primary shadow-[0_0_6px_rgba(202,23,92,1)] text-white text-base font-medium font-['Shabnam'] hover:bg-primary/10 transition-colors"},{default:L(()=>s[12]||(s[12]=[e("span",{class:"flex items-center gap-2"},[e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M9 15L3 9L9 3","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M3 9H21","stroke-linecap":"round","stroke-linejoin":"round"})]),_(" Back to Dashboard ")],-1)])),_:1})]),e("div",{class:"row-start-1"},[e("button",{onClick:z,type:"submit",class:"relative w-56 h-12 flex items-center justify-center bg-primary rounded-3xl shadow-[0_0_6px_rgba(202,23,92,1)] border border-primary text-white text-base font-medium font-['Shabnam'] hover:bg-primary/90 transition-colors"},s[13]||(s[13]=[e("span",{class:"flex items-center gap-2"},[_(" Save Changes "),e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M5 13L9 17L19 7","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)]))])])])])}}},Ae=R(_e,[["__scopeId","data-v-f175f69a"]]);export{Ae as default};
