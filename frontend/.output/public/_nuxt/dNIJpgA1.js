import{_ as me}from"./Bsrf37Yq.js";import{T as z,_ as ve,r as g,v as be,L as fe,k as ye,c as i,a as e,E as b,b as f,B as o,t as l,H as re,n as S,I as y,P as R,J as ne,w as ie,o as d,d as de}from"./BeuPNDKa.js";import{_ as xe}from"./DF3qM6BK.js";import{_ as _e}from"./DBEUCIjR.js";import{u as h}from"./C3kHl5Uz.js";import{u as w}from"./DJCvy_yv.js";const ge=z("/images/paypal.png"),he=z("/images/stripe.png"),we=z("/images/razorpay.png"),ke=z("/images/manual_transfer.png"),Ce={class:"py-12"},Te={class:"container mx-auto px-4"},Se={class:"mb-8"},Re={class:"p-6 rounded-lg shadow-md"},ze={class:"relative flex justify-between items-center"},Pe={class:"relative z-10 flex flex-col items-center gap-2"},je={class:"w-16 h-16 bg-primary rounded-full flex items-center justify-center"},Ae={class:"relative z-10 flex flex-col items-center gap-2"},Ee={class:"w-16 h-16 bg-primary rounded-full flex items-center justify-center"},Oe={class:"relative z-10 flex flex-col items-center gap-2"},Ne={class:"w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center"},Ve={key:0,class:"grid grid-cols-1 lg:grid-cols-12 gap-6"},Be={class:"lg:col-span-7"},De={class:"bg-white/5 p-6 rounded-lg shadow-md"},Me={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 flex justify-between items-center"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Fe={key:0,class:"space-y-2"},Ue={key:1,class:"text-center py-4"},Ke={key:0,class:"mb-4"},Le=["innerHTML"],He={class:"mt-4"},Ie={class:"lg:col-span-5"},qe={class:"bg-white/5 p-6 rounded-lg shadow-md mb-6"},Je={class:"flex justify-between mb-2"},Ge={class:""},Qe={class:"flex justify-between mb-2"},We={class:""},Xe={class:"flex justify-between mb-2"},Ye={class:""},Ze={class:"flex justify-between mb-2"},et={key:0,class:"flex items-center space-x-2"},tt={key:1},st={class:"border-t pt-4 mt-4 flex justify-between"},ot={class:"text-gray-200 font-semibold"},at={key:0,class:"bg-white/5 p-6 rounded-lg shadow-md"},lt={key:0,class:"text-red-400 my-2"},rt={else:"",class:"bg-red-500/5 p-4 text-center rounded-lg text-red-500"},nt={__name:"index",async setup(it){var O,N;let k,j;const{addToast:C}=fe(),v=g({}),{data:s,error:P}=([k,j]=be(()=>{var n;return h("checkout",{headers:{Authorization:`Bearer ${(n=w("CSRF_ASRO_TOKEN"))==null?void 0:n.value}`}})}),k=await k,j(),k);P.value&&C((N=(O=P.value)==null?void 0:O.data)==null?void 0:N.msg,"error",5e3);const a=g(""),T=g(""),x=g(""),A=g(!1),ue=async()=>{var c,p,m;if(!a.value&&s.value.total>0){alert("Please select a payment gateway");return}if(a.value==="manual"&&!T.value){alert("Please enter a reference number");return}console.log("Checkout submitted");const{data:n,status:t,error:u}=await h("checkout",{body:{gateway:a.value,reference_number:T.value},method:"POST",headers:{Authorization:`Bearer ${(c=w("CSRF_ASRO_TOKEN"))==null?void 0:c.value}`}});u.value&&C((m=(p=u.value)==null?void 0:p.data)==null?void 0:m.message,"error",5e3)},E=async()=>{var t;const{data:n}=await h("checkout",{headers:{Authorization:`Bearer ${(t=w("CSRF_ASRO_TOKEN"))==null?void 0:t.value}`}});s.value=n.value},ce=async()=>{var c,p,m,_;if(!x.value){v.value.coupon_error="Please enter a coupon code";return}v.coupon_error="";const{data:n,status:t,error:u}=await h("post-coupon-code",{method:"POST",body:{coupon_code:x.value},headers:{Authorization:`Bearer ${(c=w("CSRF_ASRO_TOKEN"))==null?void 0:c.value}`}});t.value=="success"&&(console.log(n==null?void 0:n.value),C((p=n.value)==null?void 0:p.msg,"success",5e3),E()),v.value.coupon_error=(_=(m=u.value)==null?void 0:m.data)==null?void 0:_.msg},pe=async()=>{var c,p,m;v.coupon_error="";const{data:n,status:t,error:u}=await h("coupon-code",{method:"DELETE",body:{coupon_code:x.value},headers:{Authorization:`Bearer ${(c=w("CSRF_ASRO_TOKEN"))==null?void 0:c.value}`}});t.value=="success"&&(E(),C("Coupon removed","success",5e3)),v.value.coupon_error=(m=(p=u.value)==null?void 0:p.data)==null?void 0:m.msg};return ye(a,n=>{A.value=n==="manual"}),(n,t)=>{var c,p,m,_,V,B,D,M,$,F,U,K,L,H,I,q,J,G,Q,W,X,Y,Z,ee,te,se,oe,ae,le;const u=me;return d(),i("div",Ce,[e("div",Te,[e("div",Se,[e("div",Re,[t[11]||(t[11]=e("h2",{class:"text-2xl font-bold mb-4"},"Secure Checkout",-1)),e("div",ze,[t[10]||(t[10]=e("div",{class:"absolute top-[37%] w-[90%] mx-auto left-0 right-0 h-0 border-t-4 border-primary transform -translate-y-1/2"},null,-1)),e("div",Pe,[e("div",je,[f(u,{name:"iconsax/bulk/bag",class:"text-4xl"})]),t[7]||(t[7]=e("a",{class:"text-primary text-lg font-bold"},"Cart Items",-1))]),e("div",Ae,[e("div",Ee,[f(u,{name:"iconsax/bulk/card-pos",class:"text-4xl"})]),t[8]||(t[8]=e("span",{class:"text-primary text-lg font-bold"},"Payment",-1))]),e("div",Oe,[e("div",Ne,[f(u,{name:"iconsax/bulk/receive-square",class:"text-4xl text-gray-500"})]),t[9]||(t[9]=e("span",{class:"text-gray-400 text-lg font-bold"},"Download",-1))])])])]),o(s)?(d(),i("div",Ve,[e("div",Be,[e("div",De,[t[18]||(t[18]=e("h2",{class:"text-2xl font-bold mb-4"},"Payment Details",-1)),(c=v.value)!=null&&c.error?(d(),i("div",Me,[e("span",null,l(v.value.error),1),e("button",{onClick:t[0]||(t[0]=r=>v.value.error=null),class:"text-red-700 hover:text-red-900"},"Ã—")])):b("",!0),e("form",{onSubmit:re(ue,["prevent"]),id:"checkoutform"},[e("div",$e,[((p=o(s))==null?void 0:p.total)>0?(d(),i("div",Fe,[(_=(m=o(s))==null?void 0:m.setting)!=null&&_.is_checked_paypal?(d(),i("label",{key:0,class:S(["block bg-white p-2 rounded-lg shadow-md flex items-center justify-between cursor-pointer transition-all duration-200 border",{"!bg-red-200 !border-red-500":a.value=="paypal"}])},[t[12]||(t[12]=e("div",{class:"flex items-center space-x-4"},[e("img",{src:ge,alt:"PayPal",class:"h-4"}),e("p",{class:"text-lg font-medium text-gray-800"},"PayPal")],-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>a.value=r),type:"radio",name:"gateway",value:"paypal",class:"hidden"},null,512),[[R,a.value]])],2)):b("",!0),(B=(V=o(s))==null?void 0:V.setting)!=null&&B.is_checked_stripe?(d(),i("label",{key:1,class:S(["block bg-white p-2 rounded-lg shadow-md flex items-center justify-between cursor-pointer transition-all duration-200 border",{"!bg-red-200 !border-red-500":a.value=="stripe"}])},[t[13]||(t[13]=e("div",{class:"flex items-center space-x-4"},[e("img",{src:he,alt:"Stripe",class:"h-4"}),e("p",{class:"text-lg font-medium text-gray-800"},"Stripe")],-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.value=r),type:"radio",name:"gateway",value:"stripe",class:"hidden"},null,512),[[R,a.value]])],2)):b("",!0),(M=(D=o(s))==null?void 0:D.setting)!=null&&M.is_checked_razorpay?(d(),i("label",{key:2,class:S(["block bg-white p-2 rounded-lg shadow-md flex items-center justify-between cursor-pointer transition-all duration-200 border",{"!bg-red-200 !border-red-500":a.value=="razorpay"}])},[t[14]||(t[14]=e("div",{class:"flex items-center space-x-4"},[e("img",{src:we,alt:"Razorpay",class:"h-4"}),e("p",{class:"text-lg font-medium text-gray-800"},"Razorpay")],-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>a.value=r),type:"radio",name:"gateway",value:"razorpay",class:"hidden"},null,512),[[R,a.value]])],2)):b("",!0),(F=($=o(s))==null?void 0:$.setting)!=null&&F.is_checked_manual_transfer?(d(),i("label",{key:3,class:S(["block bg-white p-2 rounded-lg shadow-md flex items-center justify-between cursor-pointer transition-all duration-200 border",{"!bg-red-200 !border-red-500":a.value=="manual"}])},[t[15]||(t[15]=e("div",{class:"flex items-center space-x-4"},[e("img",{src:ke,alt:"Manual Transfer",class:"h-10"}),e("p",{class:"text-lg font-medium text-gray-800"},"Manual Transfer")],-1)),y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>a.value=r),type:"radio",name:"gateway",value:"manual",class:"hidden"},null,512),[[R,a.value]])],2)):b("",!0)])):(d(),i("div",Ue,t[16]||(t[16]=[e("p",{class:"text-gray-600 text-lg"},"No Payment Required",-1),e("input",{type:"hidden",name:"gateway",value:"free"},null,-1)])))]),A.value?(d(),i("div",Ke,[e("div",{innerHTML:(K=(U=o(s))==null?void 0:U.setting)==null?void 0:K.manual_transfer_details,class:"prose text-gray-700"},null,8,Le),e("div",He,[y(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>T.value=r),type:"text",placeholder:"Enter Reference no.",class:"w-full p-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[ne,T.value]]),t[17]||(t[17]=e("label",{class:"text-sm text-gray-600 mt-1"},"Enter Reference no.",-1))])])):b("",!0),f(xe,{type:"submit",class:"w-full !p-4 transition"},{default:ie(()=>{var r;return[de(l(((r=o(s))==null?void 0:r.total)>0?"Pay and Continue":"Continue"),1)]}),_:1})],32)])]),e("div",Ie,[e("div",qe,[t[24]||(t[24]=e("h2",{class:"text-2xl font-bold mb-4"},"Order Details",-1)),e("div",Je,[t[19]||(t[19]=e("p",{class:""},"Total Products",-1)),e("p",Ge,l(((L=o(s))==null?void 0:L.total_product)??0),1)]),e("div",Qe,[t[20]||(t[20]=e("p",{class:""},"Subtotal",-1)),e("p",We,l((H=o(s))==null?void 0:H.price_symbol)+l(((I=o(s))==null?void 0:I.subtotal)??0),1)]),e("div",Xe,[t[21]||(t[21]=e("p",{class:""},"Tax",-1)),e("p",Ye,l((q=o(s))==null?void 0:q.price_symbol)+l(((J=o(s))==null?void 0:J.tax)??0),1)]),e("div",Ze,[t[22]||(t[22]=e("p",{class:""},"Discount",-1)),(G=o(s))!=null&&G.discount?(d(),i("div",et,[e("p",null,l((Q=o(s))==null?void 0:Q.discount_code)+" - "+l((W=o(s))==null?void 0:W.price_symbol)+l(((X=o(s))==null?void 0:X.discount)??0),1),e("button",{type:"submit",onClick:pe,class:"text-red-600 hover:text-red-800"},[f(u,{name:"iconsax/bulk/trash"})])])):(d(),i("p",tt,"- "+l((Y=o(s))==null?void 0:Y.price_symbol)+l(((Z=o(s))==null?void 0:Z.discount)??0),1))]),e("div",st,[t[23]||(t[23]=e("p",{class:"text-gray-200 font-semibold"},"Total",-1)),e("p",ot,l((ee=o(s))==null?void 0:ee.price_symbol)+l((te=o(s))==null?void 0:te.total),1)])]),((se=o(s))==null?void 0:se.total)>0?(d(),i("div",at,[t[26]||(t[26]=e("h2",{class:"text-xl font-bold mb-4"},"Discount Code",-1)),e("form",{onSubmit:re(ce,["prevent"]),class:"flex space-x-2"},[e("div",null,[y(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>x.value=r),type:"text",placeholder:"Enter Discount Code",class:"w-full py-2 px-4 bg-[#14082A] border border-[#514078] rounded-2xl text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[ne,x.value]])]),f(_e,{type:"submit",class:"text-white px-4 py-2"},{default:ie(()=>t[25]||(t[25]=[de(" Apply ")])),_:1})],32),v.value.coupon_error?(d(),i("span",lt,l((oe=v.value)==null?void 0:oe.coupon_error),1)):b("",!0)])):b("",!0)])])):b("",!0),e("div",rt,l((le=(ae=o(P))==null?void 0:ae.data)==null?void 0:le.msg),1)])])}}},bt=ve(nt,[["__scopeId","data-v-f37a1543"]]);export{bt as default};
